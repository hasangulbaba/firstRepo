<!DOCTYPE html>
<html>
<style>
body  {
    background-image: url("https://spycep.com/wp-content/uploads/android-telefon-dinleme-spycep-arka-plan-3.jpg");
}
</style>
<body style="background-color:#808080;">
<title>admin</title>
<script src="database.js"></script>

<center>
<h1>ADMİN GİRİŞ SAYFASI<h1/>
<center>

<tr style="text-align:left;">
   <form>
  <br>
  <tr style="text-align:left;">
   <th><text style="font-weight:bold;text-align:left; color:white;">Kullanıcı Adı:</text></th>
   <th><input type=text id=kullanıcıAd></th> 
  </tr>
  </br>
  Şifrenizi Girin: <input type="password" name="pwd" id="sifre" maxlength="8" color:white;><br>
  E-mails: <input type="email" name="emailaddress" multiple color:white;>
</form>
 </tr>
  
<h5 style="border: 3px solid orange; color:white;">YAPMAK İSTEDİĞİNİZ İŞLEMİ SEÇİNİZ</h5>
<button onclick="kitapEkle()">Envantere Kitap Ekle</button>
<button onclick="kitapcıkar()">Envanterden Kitap çıkar</button>

<table>

  <tr style="text-align:left;">
   <th><form>
  id:<input type="number" id="id" name="quantity" min="1" >
</form></th>
  </tr>
  <tr style="text-align:left;">
   <th><text style="font-weight:bold;text-align:left; color:white;">Kitap Adı:</text></th>
   <th><input type=text id=kitapAd></th> 
  </tr>
   <tr style="text-align:left;">
   <th><text style="font-weight:bold;text-align:left; color:white;">Yazar:</text></th>
   <th><input type=text id=yazar></th> 
  </tr>
   <tr style="text-align:left;">
   <th><text style="font-weight:bold;text-align:left; color:white;">Tür:</text></th>
   <th><input type=text id=tur></th> 
  </tr>
</table>

<script>
const database = new Database();
const url = "https://hasangulbaba.github.io/firstRepo/ileriProje/text_files/";

function readData(file) {
    console.log("readData "+file);
    if(file.includes("sifre.txt")) {
      fetch(url+file)
          .then(r => r.text())
          .then(getSifre).then(kitapEkle).then(addKitap);
    }
    else {
	console.log("File could not find.")
    }
}

function parse(line) {
    let b = line.split("\t");
    return b;
}
function addKitap(txt) {
    let a = txt.split("\n");
    
	for (let s of a) {
		let std = parse(s);
		database.kitap.set(std[0],[std[1],std[2],std[3]]); //kitap adı,yazar,tür
		
	}
}
readData("kitaplar.txt");
readData("sifre.txt");
let dizi=[];
function getSifre(txt) {
    let a = txt.split("\n");
	dizi.push(a);
	return dizi;
}

function kitapEkle(){
	if(sifre.value == dizi[0]){
		for(b of database.kitap.keys()){
			if(b == id.value){//aynı id eklenemez
				window.alert("Aynı id'ye Sahip Kitap Bulunmaktadır,İd'yi Değiştiriniz!");
				break;
			}
			else{window.alert("Kitabınız Başarılı Bir Şekilde Eklenmiştir !");}
		}
		
	}
else{
	window.alert("Girdiğiniz Şifre hatalı!");
	}
}

</script>





</body>
</html>
